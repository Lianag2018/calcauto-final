{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":26,"index":186}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"3suYSPX9nHbHZ1xNTsKXtKj0atE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){\"use strict\";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),_e.AuthProvider=function({children:e}){const[l,h]=(0,t.useState)(null),[w,p]=(0,t.useState)(!0);(0,t.useEffect)(()=>{_()},[]);const _=async()=>{try{const e=await u.getItem('auth_token'),t=await u.getItem('user_data');if(e&&t)try{await s.default.get(`${n}/api/contacts`,{headers:{Authorization:`Bearer ${e}`}}),h(JSON.parse(t))}catch(e){console.log('Token invalid, clearing session'),await u.removeItem('auth_token'),await u.removeItem('user_data'),h(null)}}catch(e){console.error('Error checking auth:',e)}finally{p(!1)}};return(0,o.jsx)(c.Provider,{value:{user:l,isLoading:w,isAuthenticated:!!l,isAdmin:l?.is_admin||!1,login:async(e,t)=>{try{const o=await s.default.post(`${n}/api/auth/login`,{email:e.toLowerCase().trim(),password:t});return o.data.success?(await u.setItem('auth_token',o.data.token),await u.setItem('user_data',JSON.stringify(o.data.user)),h(o.data.user),{success:!0}):{success:!1,error:o.data.error||'Erreur de connexion'}}catch(e){return console.error('Login error:',e),{success:!1,error:e.response?.data?.detail||e.response?.data?.error||'Email ou mot de passe incorrect'}}},register:async(e,t,o)=>{try{const c=await s.default.post(`${n}/api/auth/register`,{name:e.trim(),email:t.toLowerCase().trim(),password:o});return c.data.success?(await u.setItem('auth_token',c.data.token),await u.setItem('user_data',JSON.stringify(c.data.user)),h(c.data.user),{success:!0}):{success:!1,error:c.data.error||'Erreur d\\'inscription'}}catch(e){return console.error('Register error:',e),{success:!1,error:e.response?.data?.detail||e.response?.data?.error||'Erreur d\\'inscription'}}},logout:async()=>{try{await u.removeItem('auth_token'),await u.removeItem('user_data'),h(null)}catch(e){console.error('Logout error:',e)}},getToken:async()=>await u.getItem('auth_token')},children:e})},_e.useAuth=function(){const e=(0,t.useContext)(c);if(void 0===e)throw new Error('useAuth must be used within an AuthProvider');return e};var t=r(d[0]),s=(e(r(d[1])),e(r(d[2])));r(d[3]);var o=r(d[4]);const n=\"https://ocr-workflow-2.preview.emergentagent.com\",c=(0,t.createContext)(void 0),u={getItem:async e=>localStorage.getItem(e),async setItem(e,t){localStorage.setItem(e,t)},async removeItem(e){localStorage.removeItem(e)}}});","lineCount":1,"map":[[1,143,59,0,"_e"],[1,146,59,0,"AuthProvider"],[1,159,59,7],[1,169,59,29,"children"],[1,178,59,31,"children"],[1,182,60,2],[1,188,60,9,"user"],[1,190,60,15,"setUser"],[1,194,60,26],[1,196,60,26,"useState"],[1,198,60,34,"useState"],[1,208,60,48],[1,215,61,9,"isLoading"],[1,217,61,20,"setIsLoading"],[1,221,61,36],[1,223,61,36,"useState"],[1,225,61,44,"useState"],[1,236,61,45],[1,240,63,2],[1,242,63,2,"useEffect"],[1,244,63,11,"useEffect"],[1,255,63,12],[1,260,64,4,"checkAuth"],[1,265,65,5],[1,269,67,2],[1,275,67,8,"checkAuth"],[1,277,67,20,"async"],[1,287,68,4],[1,291,69,6],[1,297,69,12,"token"],[1,305,69,26,"storage"],[1,307,69,34,"getItem"],[1,315,69,42],[1,329,70,12,"userData"],[1,337,70,29,"storage"],[1,339,70,37,"getItem"],[1,347,70,45],[1,360,72,6],[1,363,72,10,"token"],[1,366,72,19,"userData"],[1,368,74,8],[1,378,75,16,"axios"],[1,380,75,21,"default"],[1,388,75,22,"get"],[1,392,75,26],[1,395,75,29,"API_URL"],[1,412,75,53],[1,413,76,12,"headers"],[1,421,76,21],[1,422,76,23,"Authorization"],[1,436,76,38],[1,446,76,48,"token"],[1,453,79,10,"setUser"],[1,455,79,18,"JSON"],[1,460,79,23,"parse"],[1,466,79,29,"userData"],[1,469,80,8],[1,470,80,10],[1,476,80,17,"err"],[1,479,82,10,"console"],[1,487,82,18,"log"],[1,491,82,22],[1,532,83,16,"storage"],[1,534,83,24,"removeItem"],[1,545,83,35],[1,565,84,16,"storage"],[1,567,84,24,"removeItem"],[1,578,84,35],[1,591,85,10,"setUser"],[1,593,85,18],[1,598,86,8],[1,599,88,4],[1,600,88,6],[1,606,88,13,"error"],[1,609,89,6,"console"],[1,617,89,14,"error"],[1,623,89,20],[1,646,89,44,"error"],[1,648,90,4],[1,649,90,5],[1,657,91,6,"setIsLoading"],[1,660,91,19],[1,662,92,4],[1,665,154,2],[1,672,155,4],[1,674,155,4,"_reactJsxRuntime"],[1,676,155,4,"jsx"],[1,681,155,5,"AuthContext"],[1,683,155,17,"Provider"],[1,692,155,25],[1,693,155,26,"value"],[1,699,155,33],[1,700,156,6,"user"],[1,707,157,6,"isLoading"],[1,719,158,6,"isAuthenticated"],[1,737,158,25,"user"],[1,739,159,6,"isAdmin"],[1,747,159,15,"user"],[1,750,159,21,"is_admin"],[1,761,159,33],[1,763,160,6,"login"],[1,769,95,16,"async"],[1,775,95,23,"email"],[1,777,95,38,"password"],[1,782,96,4],[1,786,97,6],[1,792,97,12,"response"],[1,800,97,29,"axios"],[1,802,97,34,"default"],[1,810,97,35,"post"],[1,815,97,40],[1,818,97,43,"API_URL"],[1,837,97,69],[1,838,98,8,"email"],[1,844,98,15,"email"],[1,846,98,21,"toLowerCase"],[1,860,98,35,"trim"],[1,867,99,8,"password"],[1,880,102,6],[1,887,102,10,"response"],[1,889,102,19,"data"],[1,894,102,24,"success"],[1,909,103,14,"storage"],[1,911,103,22,"setItem"],[1,919,103,30],[1,932,103,44,"response"],[1,934,103,53,"data"],[1,939,103,58,"token"],[1,952,104,14,"storage"],[1,954,104,22,"setItem"],[1,962,104,30],[1,974,104,43,"JSON"],[1,979,104,48,"stringify"],[1,989,104,58,"response"],[1,991,104,67,"data"],[1,996,104,72,"user"],[1,1003,105,8,"setUser"],[1,1005,105,16,"response"],[1,1007,105,25,"data"],[1,1012,105,30,"user"],[1,1018,106,15],[1,1019,106,17,"success"],[1,1028,106,26],[1,1032,108,15],[1,1033,108,17,"success"],[1,1042,108,26],[1,1044,108,33,"error"],[1,1050,108,40,"response"],[1,1052,108,49,"data"],[1,1057,108,54,"error"],[1,1064,108,63],[1,1086,110,4],[1,1087,110,6],[1,1093,110,13,"error"],[1,1096,113,6],[1,1103,111,6,"console"],[1,1111,111,14,"error"],[1,1117,111,20],[1,1132,111,36,"error"],[1,1135,113,13],[1,1136,113,15,"success"],[1,1145,113,24],[1,1147,113,31,"error"],[1,1153,112,22,"error"],[1,1155,112,28,"response"],[1,1165,112,38,"data"],[1,1171,112,44,"detail"],[1,1179,112,54,"error"],[1,1181,112,60,"response"],[1,1191,112,70,"data"],[1,1197,112,76,"error"],[1,1204,112,85],[1,1238,114,4],[1,1241,161,6,"register"],[1,1250,117,19,"async"],[1,1256,117,26,"name"],[1,1258,117,40,"email"],[1,1260,117,55,"password"],[1,1265,118,4],[1,1269,119,6],[1,1275,119,12,"response"],[1,1283,119,29,"axios"],[1,1285,119,34,"default"],[1,1293,119,35,"post"],[1,1298,119,40],[1,1301,119,43,"API_URL"],[1,1323,119,72],[1,1324,120,8,"name"],[1,1329,120,14,"name"],[1,1331,120,19,"trim"],[1,1338,121,8,"email"],[1,1344,121,15,"email"],[1,1346,121,21,"toLowerCase"],[1,1360,121,35,"trim"],[1,1367,122,8,"password"],[1,1380,125,6],[1,1387,125,10,"response"],[1,1389,125,19,"data"],[1,1394,125,24,"success"],[1,1409,126,14,"storage"],[1,1411,126,22,"setItem"],[1,1419,126,30],[1,1432,126,44,"response"],[1,1434,126,53,"data"],[1,1439,126,58,"token"],[1,1452,127,14,"storage"],[1,1454,127,22,"setItem"],[1,1462,127,30],[1,1474,127,43,"JSON"],[1,1479,127,48,"stringify"],[1,1489,127,58,"response"],[1,1491,127,67,"data"],[1,1496,127,72,"user"],[1,1503,128,8,"setUser"],[1,1505,128,16,"response"],[1,1507,128,25,"data"],[1,1512,128,30,"user"],[1,1518,129,15],[1,1519,129,17,"success"],[1,1528,129,26],[1,1532,131,15],[1,1533,131,17,"success"],[1,1542,131,26],[1,1544,131,33,"error"],[1,1550,131,40,"response"],[1,1552,131,49,"data"],[1,1557,131,54,"error"],[1,1564,131,63],[1,1588,133,4],[1,1589,133,6],[1,1595,133,13,"error"],[1,1598,136,6],[1,1605,134,6,"console"],[1,1613,134,14,"error"],[1,1619,134,20],[1,1637,134,39,"error"],[1,1640,136,13],[1,1641,136,15,"success"],[1,1650,136,24],[1,1652,136,31,"error"],[1,1658,135,22,"error"],[1,1660,135,28,"response"],[1,1670,135,38,"data"],[1,1676,135,44,"detail"],[1,1684,135,54,"error"],[1,1686,135,60,"response"],[1,1696,135,70,"data"],[1,1702,135,76,"error"],[1,1709,135,85],[1,1733,137,4],[1,1736,162,6,"logout"],[1,1743,140,17,"async"],[1,1753,141,4],[1,1763,142,12,"storage"],[1,1765,142,20,"removeItem"],[1,1776,142,31],[1,1796,143,12,"storage"],[1,1798,143,20,"removeItem"],[1,1809,143,31],[1,1822,144,6,"setUser"],[1,1824,144,14],[1,1829,145,4],[1,1830,145,6],[1,1836,145,13,"error"],[1,1839,146,6,"console"],[1,1847,146,14,"error"],[1,1853,146,20],[1,1869,146,37,"error"],[1,1871,147,4],[1,1874,163,6,"getToken"],[1,1883,150,19,"async"],[1,1898,151,17,"storage"],[1,1900,151,25,"getItem"],[1,1908,151,33],[1,1923,164,6,"children"],[1,1932,165,7,"children"],[1,1935,168,0],[1,1937,170,0,"_e"],[1,1940,170,0,"useAuth"],[1,1948,170,7],[1,1959,171,2],[1,1965,171,8,"context"],[1,1968,171,18],[1,1970,171,18,"useContext"],[1,1972,171,28,"useContext"],[1,1984,171,29,"AuthContext"],[1,1987,172,2],[1,1995,172,18,"undefined"],[1,1999,172,6,"context"],[1,2001,173,4],[1,2007,173,10],[1,2011,173,14,"Error"],[1,2017,173,20],[1,2064,175,2],[1,2071,175,9,"context"],[1,2072,176,0],[1,2074,1,0],[1,2078,1,0,"_react"],[1,2080,1,0,"r"],[1,2082,1,0,"d"],[1,2084,1,0],[1,2088,3,0,"axios"],[1,2091,2,0,"_interopDefault"],[1,2093,2,0,"r"],[1,2095,2,0,"d"],[1,2097,2,0],[1,2102,3,0,"_interopDefault"],[1,2104,3,0,"r"],[1,2106,3,0,"d"],[1,2108,3,0],[1,2114,3,26,"r"],[1,2116,3,26,"d"],[1,2118,3,26],[1,2126,3,26,"_reactJsxRuntime"],[1,2128,3,26,"r"],[1,2130,3,26,"d"],[1,2132,3,26],[1,2136,6,0],[1,2142,13,6,"API_URL"],[1,2144,8,4],[1,2195,33,6,"AuthContext"],[1,2198,33,20],[1,2200,33,20,"createContext"],[1,2202,33,33,"createContext"],[1,2222,33,63,"undefined"],[1,2225,36,6,"storage"],[1,2227,36,16],[1,2228,37,2,"async"],[1,2236,37,15,"getItem"],[1,2242,37,16,"key"],[1,2245,39,13,"localStorage"],[1,2258,39,26,"getItem"],[1,2266,39,34,"key"],[1,2269,43,2],[1,2282,43,8,"setItem"],[1,2283,43,16,"key"],[1,2285,43,29,"value"],[1,2288,45,6,"localStorage"],[1,2301,45,19,"setItem"],[1,2309,45,27,"key"],[1,2311,45,32,"value"],[1,2313,49,2],[1,2315,50,2],[1,2331,50,8,"removeItem"],[1,2332,50,19,"key"],[1,2335,52,6,"localStorage"],[1,2348,52,19,"removeItem"],[1,2359,52,30,"key"],[1,2361,56,2],[1,2363,176,1],[1,2366]],"functionMap":{"names":["<global>","getApiUrl","storage.getItem","storage.setItem","storage.removeItem","AuthProvider","useEffect$argument_0","checkAuth","login","register","logout","getToken","useAuth"],"mappings":"AAA;kBCK;CDK;EE0B;GFK;EGC;GHM;EIC;GJM;OKG;YCI;GDE;oBEE;GF0B;gBGE;GHoB;mBIE;GJqB;iBKE;GLQ;mBME;GNE;CLgB;OYE;CZM"},"hasCjsExports":false},"type":"js/module"}]}