{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":26,"index":186}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"3suYSPX9nHbHZ1xNTsKXtKj0atE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){\"use strict\";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),_e.AuthProvider=function({children:e}){const[l,h]=(0,t.useState)(null),[w,p]=(0,t.useState)(!0);(0,t.useEffect)(()=>{f()},[]);const f=async()=>{try{const e=await u.getItem('auth_token'),t=await u.getItem('user_data');if(e&&t)try{await o.default.get(`${n}/api/contacts`,{headers:{Authorization:`Bearer ${e}`}}),h(JSON.parse(t))}catch(e){console.log('Token invalid, clearing session'),await u.removeItem('auth_token'),await u.removeItem('user_data'),h(null)}}catch(e){console.error('Error checking auth:',e)}finally{p(!1)}};return(0,s.jsx)(c.Provider,{value:{user:l,isLoading:w,isAuthenticated:!!l,isAdmin:l?.is_admin||!1,login:async(e,t)=>{try{const s=await o.default.post(`${n}/api/auth/login`,{email:e.toLowerCase().trim(),password:t});return s.data.success?(await u.setItem('auth_token',s.data.token),await u.setItem('user_data',JSON.stringify(s.data.user)),h(s.data.user),{success:!0}):{success:!1,error:s.data.error||'Erreur de connexion'}}catch(e){return console.error('Login error:',e),{success:!1,error:e.response?.data?.detail||e.response?.data?.error||'Email ou mot de passe incorrect'}}},register:async(e,t,s)=>{try{const c=await o.default.post(`${n}/api/auth/register`,{name:e.trim(),email:t.toLowerCase().trim(),password:s});return c.data.success?(await u.setItem('auth_token',c.data.token),await u.setItem('user_data',JSON.stringify(c.data.user)),h(c.data.user),{success:!0}):{success:!1,error:c.data.error||'Erreur d\\'inscription'}}catch(e){return console.error('Register error:',e),{success:!1,error:e.response?.data?.detail||e.response?.data?.error||'Erreur d\\'inscription'}}},logout:async()=>{try{await u.removeItem('auth_token'),await u.removeItem('user_data'),h(null)}catch(e){console.error('Logout error:',e)}},getToken:async()=>await u.getItem('auth_token')},children:e})},_e.useAuth=function(){const e=(0,t.useContext)(c);if(void 0===e)throw new Error('useAuth must be used within an AuthProvider');return e};var t=r(d[0]),o=(e(r(d[1])),e(r(d[2])));r(d[3]);var s=r(d[4]);const n='undefined'!=typeof window&&window.location.hostname.includes('vercel.app')?'https://calcauto-final-backend.onrender.com':\"https://ocr-vision-test.preview.emergentagent.com\",c=(0,t.createContext)(void 0),u={getItem:async e=>localStorage.getItem(e),async setItem(e,t){localStorage.setItem(e,t)},async removeItem(e){localStorage.removeItem(e)}}});","lineCount":1,"map":[[1,143,67,0,"_e"],[1,146,67,0,"AuthProvider"],[1,159,67,7],[1,169,67,29,"children"],[1,178,67,31,"children"],[1,182,68,2],[1,188,68,9,"user"],[1,190,68,15,"setUser"],[1,194,68,26],[1,196,68,26,"useState"],[1,198,68,34,"useState"],[1,208,68,48],[1,215,69,9,"isLoading"],[1,217,69,20,"setIsLoading"],[1,221,69,36],[1,223,69,36,"useState"],[1,225,69,44,"useState"],[1,236,69,45],[1,240,71,2],[1,242,71,2,"useEffect"],[1,244,71,11,"useEffect"],[1,255,71,12],[1,260,72,4,"checkAuth"],[1,265,73,5],[1,269,75,2],[1,275,75,8,"checkAuth"],[1,277,75,20,"async"],[1,287,76,4],[1,291,77,6],[1,297,77,12,"token"],[1,305,77,26,"storage"],[1,307,77,34,"getItem"],[1,315,77,42],[1,329,78,12,"userData"],[1,337,78,29,"storage"],[1,339,78,37,"getItem"],[1,347,78,45],[1,360,80,6],[1,363,80,10,"token"],[1,366,80,19,"userData"],[1,368,82,8],[1,378,83,16,"axios"],[1,380,83,21,"default"],[1,388,83,22,"get"],[1,392,83,26],[1,395,83,29,"API_URL"],[1,412,83,53],[1,413,84,12,"headers"],[1,421,84,21],[1,422,84,23,"Authorization"],[1,436,84,38],[1,446,84,48,"token"],[1,453,87,10,"setUser"],[1,455,87,18,"JSON"],[1,460,87,23,"parse"],[1,466,87,29,"userData"],[1,469,88,8],[1,470,88,10],[1,476,88,17,"err"],[1,479,90,10,"console"],[1,487,90,18,"log"],[1,491,90,22],[1,532,91,16,"storage"],[1,534,91,24,"removeItem"],[1,545,91,35],[1,565,92,16,"storage"],[1,567,92,24,"removeItem"],[1,578,92,35],[1,591,93,10,"setUser"],[1,593,93,18],[1,598,94,8],[1,599,96,4],[1,600,96,6],[1,606,96,13,"error"],[1,609,97,6,"console"],[1,617,97,14,"error"],[1,623,97,20],[1,646,97,44,"error"],[1,648,98,4],[1,649,98,5],[1,657,99,6,"setIsLoading"],[1,660,99,19],[1,662,100,4],[1,665,162,2],[1,672,163,4],[1,674,163,4,"_reactJsxRuntime"],[1,676,163,4,"jsx"],[1,681,163,5,"AuthContext"],[1,683,163,17,"Provider"],[1,692,163,25],[1,693,163,26,"value"],[1,699,163,33],[1,700,164,6,"user"],[1,707,165,6,"isLoading"],[1,719,166,6,"isAuthenticated"],[1,737,166,25,"user"],[1,739,167,6,"isAdmin"],[1,747,167,15,"user"],[1,750,167,21,"is_admin"],[1,761,167,33],[1,763,168,6,"login"],[1,769,103,16,"async"],[1,775,103,23,"email"],[1,777,103,38,"password"],[1,782,104,4],[1,786,105,6],[1,792,105,12,"response"],[1,800,105,29,"axios"],[1,802,105,34,"default"],[1,810,105,35,"post"],[1,815,105,40],[1,818,105,43,"API_URL"],[1,837,105,69],[1,838,106,8,"email"],[1,844,106,15,"email"],[1,846,106,21,"toLowerCase"],[1,860,106,35,"trim"],[1,867,107,8,"password"],[1,880,110,6],[1,887,110,10,"response"],[1,889,110,19,"data"],[1,894,110,24,"success"],[1,909,111,14,"storage"],[1,911,111,22,"setItem"],[1,919,111,30],[1,932,111,44,"response"],[1,934,111,53,"data"],[1,939,111,58,"token"],[1,952,112,14,"storage"],[1,954,112,22,"setItem"],[1,962,112,30],[1,974,112,43,"JSON"],[1,979,112,48,"stringify"],[1,989,112,58,"response"],[1,991,112,67,"data"],[1,996,112,72,"user"],[1,1003,113,8,"setUser"],[1,1005,113,16,"response"],[1,1007,113,25,"data"],[1,1012,113,30,"user"],[1,1018,114,15],[1,1019,114,17,"success"],[1,1028,114,26],[1,1032,116,15],[1,1033,116,17,"success"],[1,1042,116,26],[1,1044,116,33,"error"],[1,1050,116,40,"response"],[1,1052,116,49,"data"],[1,1057,116,54,"error"],[1,1064,116,63],[1,1086,118,4],[1,1087,118,6],[1,1093,118,13,"error"],[1,1096,121,6],[1,1103,119,6,"console"],[1,1111,119,14,"error"],[1,1117,119,20],[1,1132,119,36,"error"],[1,1135,121,13],[1,1136,121,15,"success"],[1,1145,121,24],[1,1147,121,31,"error"],[1,1153,120,22,"error"],[1,1155,120,28,"response"],[1,1165,120,38,"data"],[1,1171,120,44,"detail"],[1,1179,120,54,"error"],[1,1181,120,60,"response"],[1,1191,120,70,"data"],[1,1197,120,76,"error"],[1,1204,120,85],[1,1238,122,4],[1,1241,169,6,"register"],[1,1250,125,19,"async"],[1,1256,125,26,"name"],[1,1258,125,40,"email"],[1,1260,125,55,"password"],[1,1265,126,4],[1,1269,127,6],[1,1275,127,12,"response"],[1,1283,127,29,"axios"],[1,1285,127,34,"default"],[1,1293,127,35,"post"],[1,1298,127,40],[1,1301,127,43,"API_URL"],[1,1323,127,72],[1,1324,128,8,"name"],[1,1329,128,14,"name"],[1,1331,128,19,"trim"],[1,1338,129,8,"email"],[1,1344,129,15,"email"],[1,1346,129,21,"toLowerCase"],[1,1360,129,35,"trim"],[1,1367,130,8,"password"],[1,1380,133,6],[1,1387,133,10,"response"],[1,1389,133,19,"data"],[1,1394,133,24,"success"],[1,1409,134,14,"storage"],[1,1411,134,22,"setItem"],[1,1419,134,30],[1,1432,134,44,"response"],[1,1434,134,53,"data"],[1,1439,134,58,"token"],[1,1452,135,14,"storage"],[1,1454,135,22,"setItem"],[1,1462,135,30],[1,1474,135,43,"JSON"],[1,1479,135,48,"stringify"],[1,1489,135,58,"response"],[1,1491,135,67,"data"],[1,1496,135,72,"user"],[1,1503,136,8,"setUser"],[1,1505,136,16,"response"],[1,1507,136,25,"data"],[1,1512,136,30,"user"],[1,1518,137,15],[1,1519,137,17,"success"],[1,1528,137,26],[1,1532,139,15],[1,1533,139,17,"success"],[1,1542,139,26],[1,1544,139,33,"error"],[1,1550,139,40,"response"],[1,1552,139,49,"data"],[1,1557,139,54,"error"],[1,1564,139,63],[1,1588,141,4],[1,1589,141,6],[1,1595,141,13,"error"],[1,1598,144,6],[1,1605,142,6,"console"],[1,1613,142,14,"error"],[1,1619,142,20],[1,1637,142,39,"error"],[1,1640,144,13],[1,1641,144,15,"success"],[1,1650,144,24],[1,1652,144,31,"error"],[1,1658,143,22,"error"],[1,1660,143,28,"response"],[1,1670,143,38,"data"],[1,1676,143,44,"detail"],[1,1684,143,54,"error"],[1,1686,143,60,"response"],[1,1696,143,70,"data"],[1,1702,143,76,"error"],[1,1709,143,85],[1,1733,145,4],[1,1736,170,6,"logout"],[1,1743,148,17,"async"],[1,1753,149,4],[1,1763,150,12,"storage"],[1,1765,150,20,"removeItem"],[1,1776,150,31],[1,1796,151,12,"storage"],[1,1798,151,20,"removeItem"],[1,1809,151,31],[1,1822,152,6,"setUser"],[1,1824,152,14],[1,1829,153,4],[1,1830,153,6],[1,1836,153,13,"error"],[1,1839,154,6,"console"],[1,1847,154,14,"error"],[1,1853,154,20],[1,1869,154,37,"error"],[1,1871,155,4],[1,1874,171,6,"getToken"],[1,1883,158,19,"async"],[1,1898,159,17,"storage"],[1,1900,159,25,"getItem"],[1,1908,159,33],[1,1923,172,6,"children"],[1,1932,173,7,"children"],[1,1935,176,0],[1,1937,178,0,"_e"],[1,1940,178,0,"useAuth"],[1,1948,178,7],[1,1959,179,2],[1,1965,179,8,"context"],[1,1968,179,18],[1,1970,179,18,"useContext"],[1,1972,179,28,"useContext"],[1,1984,179,29,"AuthContext"],[1,1987,180,2],[1,1995,180,18,"undefined"],[1,1999,180,6,"context"],[1,2001,181,4],[1,2007,181,10],[1,2011,181,14,"Error"],[1,2017,181,20],[1,2064,183,2],[1,2071,183,9,"context"],[1,2072,184,0],[1,2074,1,0],[1,2078,1,0,"_react"],[1,2080,1,0,"r"],[1,2082,1,0,"d"],[1,2084,1,0],[1,2088,3,0,"axios"],[1,2091,2,0,"_interopDefault"],[1,2093,2,0,"r"],[1,2095,2,0,"d"],[1,2097,2,0],[1,2102,3,0,"_interopDefault"],[1,2104,3,0,"r"],[1,2106,3,0,"d"],[1,2108,3,0],[1,2114,3,26,"r"],[1,2116,3,26,"d"],[1,2118,3,26],[1,2126,3,26,"_reactJsxRuntime"],[1,2128,3,26,"r"],[1,2130,3,26,"d"],[1,2132,3,26],[1,2136,8,0],[1,2142,21,6,"API_URL"],[1,2144,10,24],[1,2164,10,13,"window"],[1,2172,10,39,"window"],[1,2179,10,46,"location"],[1,2188,10,55,"hostname"],[1,2197,10,64,"includes"],[1,2206,10,73],[1,2220,11,11],[1,2266,15,4],[1,2318,41,6,"AuthContext"],[1,2321,41,20],[1,2323,41,20,"createContext"],[1,2325,41,33,"createContext"],[1,2345,41,63,"undefined"],[1,2348,44,6,"storage"],[1,2350,44,16],[1,2351,45,2,"async"],[1,2359,45,15,"getItem"],[1,2365,45,16,"key"],[1,2368,47,13,"localStorage"],[1,2381,47,26,"getItem"],[1,2389,47,34,"key"],[1,2392,51,2],[1,2405,51,8,"setItem"],[1,2406,51,16,"key"],[1,2408,51,29,"value"],[1,2411,53,6,"localStorage"],[1,2424,53,19,"setItem"],[1,2432,53,27,"key"],[1,2434,53,32,"value"],[1,2436,57,2],[1,2438,58,2],[1,2454,58,8,"removeItem"],[1,2455,58,19,"key"],[1,2458,60,6,"localStorage"],[1,2471,60,19,"removeItem"],[1,2482,60,30,"key"],[1,2484,64,2],[1,2486,184,1],[1,2489]],"functionMap":{"names":["<global>","getApiUrl","storage.getItem","storage.setItem","storage.removeItem","AuthProvider","useEffect$argument_0","checkAuth","login","register","logout","getToken","useAuth"],"mappings":"AAA;kBCO;CDW;EE0B;GFK;EGC;GHM;EIC;GJM;OKG;YCI;GDE;oBEE;GF0B;gBGE;GHoB;mBIE;GJqB;iBKE;GLQ;mBME;GNE;CLgB;OYE;CZM"},"hasCjsExports":false},"type":"js/module"}]}