{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":26,"index":186}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"../utils/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":228},"end":{"line":5,"column":39,"index":267}}],"key":"XoJ+jbKCrEi38eKczMqtlbk+TCk=","exportNames":["*"],"imports":1}},{"name":"react/jsx-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"3suYSPX9nHbHZ1xNTsKXtKj0atE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){\"use strict\";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),_e.AuthProvider=function({children:e}){const[l,h]=(0,t.useState)(null),[_,w]=(0,t.useState)(!0);(0,t.useEffect)(()=>{I()},[]);const I=async()=>{try{const e=await u.getItem('auth_token'),t=await u.getItem('user_data');if(e&&t)try{await s.default.get(`${o.API_URL}/api/contacts`,{headers:{Authorization:`Bearer ${e}`}}),h(JSON.parse(t))}catch(e){console.log('Token invalid, clearing session'),await u.removeItem('auth_token'),await u.removeItem('user_data'),h(null)}}catch(e){console.error('Error checking auth:',e)}finally{w(!1)}};return(0,n.jsx)(c.Provider,{value:{user:l,isLoading:_,isAuthenticated:!!l,isAdmin:l?.is_admin||!1,login:async(e,t)=>{try{const n=await s.default.post(`${o.API_URL}/api/auth/login`,{email:e.toLowerCase().trim(),password:t});return n.data.success?(await u.setItem('auth_token',n.data.token),await u.setItem('user_data',JSON.stringify(n.data.user)),h(n.data.user),{success:!0}):{success:!1,error:n.data.error||'Erreur de connexion'}}catch(e){return console.error('Login error:',e),'ERR_NETWORK'!==e.code&&e.response?{success:!1,error:e.response?.data?.detail||e.response?.data?.error||'Email ou mot de passe incorrect'}:{success:!1,error:'Impossible de joindre le serveur. V\\xe9rifiez votre connexion.'}}},register:async(e,t,n)=>{try{const c=await s.default.post(`${o.API_URL}/api/auth/register`,{name:e.trim(),email:t.toLowerCase().trim(),password:n});return c.data.success?(await u.setItem('auth_token',c.data.token),await u.setItem('user_data',JSON.stringify(c.data.user)),h(c.data.user),{success:!0}):{success:!1,error:c.data.error||'Erreur d\\'inscription'}}catch(e){return console.error('Register error:',e),{success:!1,error:e.response?.data?.detail||e.response?.data?.error||'Erreur d\\'inscription'}}},logout:async()=>{try{await u.removeItem('auth_token'),await u.removeItem('user_data'),h(null)}catch(e){console.error('Logout error:',e)}},getToken:async()=>await u.getItem('auth_token')},children:e})},_e.useAuth=function(){const e=(0,t.useContext)(c);if(void 0===e)throw new Error('useAuth must be used within an AuthProvider');return e};var t=r(d[0]),s=(e(r(d[1])),e(r(d[2])));r(d[3]);var o=r(d[4]),n=r(d[5]);const c=(0,t.createContext)(void 0),u={getItem:async e=>localStorage.getItem(e),async setItem(e,t){localStorage.setItem(e,t)},async removeItem(e){localStorage.removeItem(e)}}});","lineCount":1,"map":[[1,143,51,0,"_e"],[1,146,51,0,"AuthProvider"],[1,159,51,7],[1,169,51,29,"children"],[1,178,51,31,"children"],[1,182,52,2],[1,188,52,9,"user"],[1,190,52,15,"setUser"],[1,194,52,26],[1,196,52,26,"useState"],[1,198,52,34,"useState"],[1,208,52,48],[1,215,53,9,"isLoading"],[1,217,53,20,"setIsLoading"],[1,221,53,36],[1,223,53,36,"useState"],[1,225,53,44,"useState"],[1,236,53,45],[1,240,55,2],[1,242,55,2,"useEffect"],[1,244,55,11,"useEffect"],[1,255,55,12],[1,260,56,4,"checkAuth"],[1,265,57,5],[1,269,59,2],[1,275,59,8,"checkAuth"],[1,277,59,20,"async"],[1,287,60,4],[1,291,61,6],[1,297,61,12,"token"],[1,305,61,26,"storage"],[1,307,61,34,"getItem"],[1,315,61,42],[1,329,62,12,"userData"],[1,337,62,29,"storage"],[1,339,62,37,"getItem"],[1,347,62,45],[1,360,64,6],[1,363,64,10,"token"],[1,366,64,19,"userData"],[1,368,66,8],[1,378,67,16,"axios"],[1,380,67,21,"default"],[1,388,67,22,"get"],[1,392,67,26],[1,395,67,29,"API_URL"],[1,397,67,36,"API_URL"],[1,420,67,53],[1,421,68,12,"headers"],[1,429,68,21],[1,430,68,23,"Authorization"],[1,444,68,38],[1,454,68,48,"token"],[1,461,71,10,"setUser"],[1,463,71,18,"JSON"],[1,468,71,23,"parse"],[1,474,71,29,"userData"],[1,477,72,8],[1,478,72,10],[1,484,72,17,"err"],[1,487,74,10,"console"],[1,495,74,18,"log"],[1,499,74,22],[1,540,75,16,"storage"],[1,542,75,24,"removeItem"],[1,553,75,35],[1,573,76,16,"storage"],[1,575,76,24,"removeItem"],[1,586,76,35],[1,599,77,10,"setUser"],[1,601,77,18],[1,606,78,8],[1,607,80,4],[1,608,80,6],[1,614,80,13,"error"],[1,617,81,6,"console"],[1,625,81,14,"error"],[1,631,81,20],[1,654,81,44,"error"],[1,656,82,4],[1,657,82,5],[1,665,83,6,"setIsLoading"],[1,668,83,19],[1,670,84,4],[1,673,149,2],[1,680,150,4],[1,682,150,4,"_reactJsxRuntime"],[1,684,150,4,"jsx"],[1,689,150,5,"AuthContext"],[1,691,150,17,"Provider"],[1,700,150,25],[1,701,150,26,"value"],[1,707,150,33],[1,708,151,6,"user"],[1,715,152,6,"isLoading"],[1,727,153,6,"isAuthenticated"],[1,745,153,25,"user"],[1,747,154,6,"isAdmin"],[1,755,154,15,"user"],[1,758,154,21,"is_admin"],[1,769,154,33],[1,771,155,6,"login"],[1,777,87,16,"async"],[1,783,87,23,"email"],[1,785,87,38,"password"],[1,790,88,4],[1,794,89,6],[1,800,89,12,"response"],[1,808,89,29,"axios"],[1,810,89,34,"default"],[1,818,89,35,"post"],[1,823,89,40],[1,826,89,43,"API_URL"],[1,828,89,50,"API_URL"],[1,853,89,69],[1,854,90,8,"email"],[1,860,90,15,"email"],[1,862,90,21,"toLowerCase"],[1,876,90,35,"trim"],[1,883,91,8,"password"],[1,896,94,6],[1,903,94,10,"response"],[1,905,94,19,"data"],[1,910,94,24,"success"],[1,925,95,14,"storage"],[1,927,95,22,"setItem"],[1,935,95,30],[1,948,95,44,"response"],[1,950,95,53,"data"],[1,955,95,58,"token"],[1,968,96,14,"storage"],[1,970,96,22,"setItem"],[1,978,96,30],[1,990,96,43,"JSON"],[1,995,96,48,"stringify"],[1,1005,96,58,"response"],[1,1007,96,67,"data"],[1,1012,96,72,"user"],[1,1019,97,8,"setUser"],[1,1021,97,16,"response"],[1,1023,97,25,"data"],[1,1028,97,30,"user"],[1,1034,98,15],[1,1035,98,17,"success"],[1,1044,98,26],[1,1048,100,15],[1,1049,100,17,"success"],[1,1058,100,26],[1,1060,100,33,"error"],[1,1066,100,40,"response"],[1,1068,100,49,"data"],[1,1073,100,54,"error"],[1,1080,100,63],[1,1102,102,4],[1,1103,102,6],[1,1109,102,13,"error"],[1,1112,104,6],[1,1119,103,6,"console"],[1,1127,103,14,"error"],[1,1133,103,20],[1,1148,103,36,"error"],[1,1151,104,25],[1,1167,104,10,"error"],[1,1169,104,16,"code"],[1,1175,104,43,"error"],[1,1177,104,49,"response"],[1,1186,108,13],[1,1187,108,15,"success"],[1,1196,108,24],[1,1198,108,31,"error"],[1,1204,107,22,"error"],[1,1206,107,28,"response"],[1,1216,107,38,"data"],[1,1222,107,44,"detail"],[1,1230,107,54,"error"],[1,1232,107,60,"response"],[1,1242,107,70,"data"],[1,1248,107,76,"error"],[1,1255,107,85],[1,1290,105,15],[1,1291,105,17,"success"],[1,1300,105,26],[1,1302,105,33,"error"],[1,1308,105,40],[1,1373,109,4],[1,1376,156,6,"register"],[1,1385,112,19,"async"],[1,1391,112,26,"name"],[1,1393,112,40,"email"],[1,1395,112,55,"password"],[1,1400,113,4],[1,1404,114,6],[1,1410,114,12,"response"],[1,1418,114,29,"axios"],[1,1420,114,34,"default"],[1,1428,114,35,"post"],[1,1433,114,40],[1,1436,114,43,"API_URL"],[1,1438,114,50,"API_URL"],[1,1466,114,72],[1,1467,115,8,"name"],[1,1472,115,14,"name"],[1,1474,115,19,"trim"],[1,1481,116,8,"email"],[1,1487,116,15,"email"],[1,1489,116,21,"toLowerCase"],[1,1503,116,35,"trim"],[1,1510,117,8,"password"],[1,1523,120,6],[1,1530,120,10,"response"],[1,1532,120,19,"data"],[1,1537,120,24,"success"],[1,1552,121,14,"storage"],[1,1554,121,22,"setItem"],[1,1562,121,30],[1,1575,121,44,"response"],[1,1577,121,53,"data"],[1,1582,121,58,"token"],[1,1595,122,14,"storage"],[1,1597,122,22,"setItem"],[1,1605,122,30],[1,1617,122,43,"JSON"],[1,1622,122,48,"stringify"],[1,1632,122,58,"response"],[1,1634,122,67,"data"],[1,1639,122,72,"user"],[1,1646,123,8,"setUser"],[1,1648,123,16,"response"],[1,1650,123,25,"data"],[1,1655,123,30,"user"],[1,1661,124,15],[1,1662,124,17,"success"],[1,1671,124,26],[1,1675,126,15],[1,1676,126,17,"success"],[1,1685,126,26],[1,1687,126,33,"error"],[1,1693,126,40,"response"],[1,1695,126,49,"data"],[1,1700,126,54,"error"],[1,1707,126,63],[1,1731,128,4],[1,1732,128,6],[1,1738,128,13,"error"],[1,1741,131,6],[1,1748,129,6,"console"],[1,1756,129,14,"error"],[1,1762,129,20],[1,1780,129,39,"error"],[1,1783,131,13],[1,1784,131,15,"success"],[1,1793,131,24],[1,1795,131,31,"error"],[1,1801,130,22,"error"],[1,1803,130,28,"response"],[1,1813,130,38,"data"],[1,1819,130,44,"detail"],[1,1827,130,54,"error"],[1,1829,130,60,"response"],[1,1839,130,70,"data"],[1,1845,130,76,"error"],[1,1852,130,85],[1,1876,132,4],[1,1879,157,6,"logout"],[1,1886,135,17,"async"],[1,1896,136,4],[1,1906,137,12,"storage"],[1,1908,137,20,"removeItem"],[1,1919,137,31],[1,1939,138,12,"storage"],[1,1941,138,20,"removeItem"],[1,1952,138,31],[1,1965,139,6,"setUser"],[1,1967,139,14],[1,1972,140,4],[1,1973,140,6],[1,1979,140,13,"error"],[1,1982,141,6,"console"],[1,1990,141,14,"error"],[1,1996,141,20],[1,2012,141,37,"error"],[1,2014,142,4],[1,2017,158,6,"getToken"],[1,2026,145,19,"async"],[1,2041,146,17,"storage"],[1,2043,146,25,"getItem"],[1,2051,146,33],[1,2066,159,6,"children"],[1,2075,160,7,"children"],[1,2078,163,0],[1,2080,165,0,"_e"],[1,2083,165,0,"useAuth"],[1,2091,165,7],[1,2102,166,2],[1,2108,166,8,"context"],[1,2111,166,18],[1,2113,166,18,"useContext"],[1,2115,166,28,"useContext"],[1,2127,166,29,"AuthContext"],[1,2130,167,2],[1,2138,167,18,"undefined"],[1,2142,167,6,"context"],[1,2144,168,4],[1,2150,168,10],[1,2154,168,14,"Error"],[1,2160,168,20],[1,2207,170,2],[1,2214,170,9,"context"],[1,2215,171,0],[1,2217,1,0],[1,2221,1,0,"_react"],[1,2223,1,0,"r"],[1,2225,1,0,"d"],[1,2227,1,0],[1,2231,3,0,"axios"],[1,2234,2,0,"_interopDefault"],[1,2236,2,0,"r"],[1,2238,2,0,"d"],[1,2240,2,0],[1,2245,3,0,"_interopDefault"],[1,2247,3,0,"r"],[1,2249,3,0,"d"],[1,2251,3,0],[1,2257,3,26,"r"],[1,2259,3,26,"d"],[1,2261,3,26],[1,2265,5,0],[1,2269,5,0,"_utilsApi"],[1,2271,5,0,"r"],[1,2273,5,0,"d"],[1,2275,5,0],[1,2279,5,39,"_reactJsxRuntime"],[1,2281,5,39,"r"],[1,2283,5,39,"d"],[1,2285,5,39],[1,2289,25,0],[1,2295,25,6,"AuthContext"],[1,2298,25,20],[1,2300,25,20,"createContext"],[1,2302,25,33,"createContext"],[1,2322,25,63,"undefined"],[1,2325,28,6,"storage"],[1,2327,28,16],[1,2328,29,2,"async"],[1,2336,29,15,"getItem"],[1,2342,29,16,"key"],[1,2345,31,13,"localStorage"],[1,2358,31,26,"getItem"],[1,2366,31,34,"key"],[1,2369,35,2],[1,2382,35,8,"setItem"],[1,2383,35,16,"key"],[1,2385,35,29,"value"],[1,2388,37,6,"localStorage"],[1,2401,37,19,"setItem"],[1,2409,37,27,"key"],[1,2411,37,32,"value"],[1,2413,41,2],[1,2415,42,2],[1,2431,42,8,"removeItem"],[1,2432,42,19,"key"],[1,2435,44,6,"localStorage"],[1,2448,44,19,"removeItem"],[1,2459,44,30,"key"],[1,2461,48,2],[1,2463,171,1],[1,2466]],"functionMap":{"names":["<global>","storage.getItem","storage.setItem","storage.removeItem","AuthProvider","useEffect$argument_0","checkAuth","login","register","logout","getToken","useAuth"],"mappings":"AAA;EC4B;GDK;EEC;GFM;EGC;GHM;OIG;YCI;GDE;oBEE;GF0B;gBGE;GHuB;mBIE;GJqB;iBKE;GLQ;mBME;GNE;CJgB;OWE;CXM"},"hasCjsExports":false},"type":"js/module"}]}