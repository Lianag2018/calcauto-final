{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":26,"index":186}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"3suYSPX9nHbHZ1xNTsKXtKj0atE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){\"use strict\";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),_e.AuthProvider=function({children:e}){const[l,h]=(0,t.useState)(null),[w,p]=(0,t.useState)(!0);(0,t.useEffect)(()=>{v()},[]);const v=async()=>{try{const e=await u.getItem('auth_token'),t=await u.getItem('user_data');if(e&&t)try{await s.default.get(`${n}/api/contacts`,{headers:{Authorization:`Bearer ${e}`}}),h(JSON.parse(t))}catch(e){console.log('Token invalid, clearing session'),await u.removeItem('auth_token'),await u.removeItem('user_data'),h(null)}}catch(e){console.error('Error checking auth:',e)}finally{p(!1)}};return(0,o.jsx)(c.Provider,{value:{user:l,isLoading:w,isAuthenticated:!!l,isAdmin:l?.is_admin||!1,login:async(e,t)=>{try{const o=await s.default.post(`${n}/api/auth/login`,{email:e.toLowerCase().trim(),password:t});return o.data.success?(await u.setItem('auth_token',o.data.token),await u.setItem('user_data',JSON.stringify(o.data.user)),h(o.data.user),{success:!0}):{success:!1,error:o.data.error||'Erreur de connexion'}}catch(e){return console.error('Login error:',e),'ERR_NETWORK'!==e.code&&e.response?{success:!1,error:e.response?.data?.detail||e.response?.data?.error||'Email ou mot de passe incorrect'}:{success:!1,error:'Impossible de joindre le serveur. V\\xe9rifiez votre connexion.'}}},register:async(e,t,o)=>{try{const c=await s.default.post(`${n}/api/auth/register`,{name:e.trim(),email:t.toLowerCase().trim(),password:o});return c.data.success?(await u.setItem('auth_token',c.data.token),await u.setItem('user_data',JSON.stringify(c.data.user)),h(c.data.user),{success:!0}):{success:!1,error:c.data.error||'Erreur d\\'inscription'}}catch(e){return console.error('Register error:',e),{success:!1,error:e.response?.data?.detail||e.response?.data?.error||'Erreur d\\'inscription'}}},logout:async()=>{try{await u.removeItem('auth_token'),await u.removeItem('user_data'),h(null)}catch(e){console.error('Logout error:',e)}},getToken:async()=>await u.getItem('auth_token')},children:e})},_e.useAuth=function(){const e=(0,t.useContext)(c);if(void 0===e)throw new Error('useAuth must be used within an AuthProvider');return e};var t=r(d[0]),s=(e(r(d[1])),e(r(d[2])));r(d[3]);var o=r(d[4]);const n=\"https://calcauto-lease-calc.preview.emergentagent.com\",c=(0,t.createContext)(void 0),u={getItem:async e=>localStorage.getItem(e),async setItem(e,t){localStorage.setItem(e,t)},async removeItem(e){localStorage.removeItem(e)}}});","lineCount":1,"map":[[1,143,59,0,"_e"],[1,146,59,0,"AuthProvider"],[1,159,59,7],[1,169,59,29,"children"],[1,178,59,31,"children"],[1,182,60,2],[1,188,60,9,"user"],[1,190,60,15,"setUser"],[1,194,60,26],[1,196,60,26,"useState"],[1,198,60,34,"useState"],[1,208,60,48],[1,215,61,9,"isLoading"],[1,217,61,20,"setIsLoading"],[1,221,61,36],[1,223,61,36,"useState"],[1,225,61,44,"useState"],[1,236,61,45],[1,240,63,2],[1,242,63,2,"useEffect"],[1,244,63,11,"useEffect"],[1,255,63,12],[1,260,64,4,"checkAuth"],[1,265,65,5],[1,269,67,2],[1,275,67,8,"checkAuth"],[1,277,67,20,"async"],[1,287,68,4],[1,291,69,6],[1,297,69,12,"token"],[1,305,69,26,"storage"],[1,307,69,34,"getItem"],[1,315,69,42],[1,329,70,12,"userData"],[1,337,70,29,"storage"],[1,339,70,37,"getItem"],[1,347,70,45],[1,360,72,6],[1,363,72,10,"token"],[1,366,72,19,"userData"],[1,368,74,8],[1,378,75,16,"axios"],[1,380,75,21,"default"],[1,388,75,22,"get"],[1,392,75,26],[1,395,75,29,"API_URL"],[1,412,75,53],[1,413,76,12,"headers"],[1,421,76,21],[1,422,76,23,"Authorization"],[1,436,76,38],[1,446,76,48,"token"],[1,453,79,10,"setUser"],[1,455,79,18,"JSON"],[1,460,79,23,"parse"],[1,466,79,29,"userData"],[1,469,80,8],[1,470,80,10],[1,476,80,17,"err"],[1,479,82,10,"console"],[1,487,82,18,"log"],[1,491,82,22],[1,532,83,16,"storage"],[1,534,83,24,"removeItem"],[1,545,83,35],[1,565,84,16,"storage"],[1,567,84,24,"removeItem"],[1,578,84,35],[1,591,85,10,"setUser"],[1,593,85,18],[1,598,86,8],[1,599,88,4],[1,600,88,6],[1,606,88,13,"error"],[1,609,89,6,"console"],[1,617,89,14,"error"],[1,623,89,20],[1,646,89,44,"error"],[1,648,90,4],[1,649,90,5],[1,657,91,6,"setIsLoading"],[1,660,91,19],[1,662,92,4],[1,665,157,2],[1,672,158,4],[1,674,158,4,"_reactJsxRuntime"],[1,676,158,4,"jsx"],[1,681,158,5,"AuthContext"],[1,683,158,17,"Provider"],[1,692,158,25],[1,693,158,26,"value"],[1,699,158,33],[1,700,159,6,"user"],[1,707,160,6,"isLoading"],[1,719,161,6,"isAuthenticated"],[1,737,161,25,"user"],[1,739,162,6,"isAdmin"],[1,747,162,15,"user"],[1,750,162,21,"is_admin"],[1,761,162,33],[1,763,163,6,"login"],[1,769,95,16,"async"],[1,775,95,23,"email"],[1,777,95,38,"password"],[1,782,96,4],[1,786,97,6],[1,792,97,12,"response"],[1,800,97,29,"axios"],[1,802,97,34,"default"],[1,810,97,35,"post"],[1,815,97,40],[1,818,97,43,"API_URL"],[1,837,97,69],[1,838,98,8,"email"],[1,844,98,15,"email"],[1,846,98,21,"toLowerCase"],[1,860,98,35,"trim"],[1,867,99,8,"password"],[1,880,102,6],[1,887,102,10,"response"],[1,889,102,19,"data"],[1,894,102,24,"success"],[1,909,103,14,"storage"],[1,911,103,22,"setItem"],[1,919,103,30],[1,932,103,44,"response"],[1,934,103,53,"data"],[1,939,103,58,"token"],[1,952,104,14,"storage"],[1,954,104,22,"setItem"],[1,962,104,30],[1,974,104,43,"JSON"],[1,979,104,48,"stringify"],[1,989,104,58,"response"],[1,991,104,67,"data"],[1,996,104,72,"user"],[1,1003,105,8,"setUser"],[1,1005,105,16,"response"],[1,1007,105,25,"data"],[1,1012,105,30,"user"],[1,1018,106,15],[1,1019,106,17,"success"],[1,1028,106,26],[1,1032,108,15],[1,1033,108,17,"success"],[1,1042,108,26],[1,1044,108,33,"error"],[1,1050,108,40,"response"],[1,1052,108,49,"data"],[1,1057,108,54,"error"],[1,1064,108,63],[1,1086,110,4],[1,1087,110,6],[1,1093,110,13,"error"],[1,1096,112,6],[1,1103,111,6,"console"],[1,1111,111,14,"error"],[1,1117,111,20],[1,1132,111,36,"error"],[1,1135,112,25],[1,1151,112,10,"error"],[1,1153,112,16,"code"],[1,1159,112,43,"error"],[1,1161,112,49,"response"],[1,1170,116,13],[1,1171,116,15,"success"],[1,1180,116,24],[1,1182,116,31,"error"],[1,1188,115,22,"error"],[1,1190,115,28,"response"],[1,1200,115,38,"data"],[1,1206,115,44,"detail"],[1,1214,115,54,"error"],[1,1216,115,60,"response"],[1,1226,115,70,"data"],[1,1232,115,76,"error"],[1,1239,115,85],[1,1274,113,15],[1,1275,113,17,"success"],[1,1284,113,26],[1,1286,113,33,"error"],[1,1292,113,40],[1,1357,117,4],[1,1360,164,6,"register"],[1,1369,120,19,"async"],[1,1375,120,26,"name"],[1,1377,120,40,"email"],[1,1379,120,55,"password"],[1,1384,121,4],[1,1388,122,6],[1,1394,122,12,"response"],[1,1402,122,29,"axios"],[1,1404,122,34,"default"],[1,1412,122,35,"post"],[1,1417,122,40],[1,1420,122,43,"API_URL"],[1,1442,122,72],[1,1443,123,8,"name"],[1,1448,123,14,"name"],[1,1450,123,19,"trim"],[1,1457,124,8,"email"],[1,1463,124,15,"email"],[1,1465,124,21,"toLowerCase"],[1,1479,124,35,"trim"],[1,1486,125,8,"password"],[1,1499,128,6],[1,1506,128,10,"response"],[1,1508,128,19,"data"],[1,1513,128,24,"success"],[1,1528,129,14,"storage"],[1,1530,129,22,"setItem"],[1,1538,129,30],[1,1551,129,44,"response"],[1,1553,129,53,"data"],[1,1558,129,58,"token"],[1,1571,130,14,"storage"],[1,1573,130,22,"setItem"],[1,1581,130,30],[1,1593,130,43,"JSON"],[1,1598,130,48,"stringify"],[1,1608,130,58,"response"],[1,1610,130,67,"data"],[1,1615,130,72,"user"],[1,1622,131,8,"setUser"],[1,1624,131,16,"response"],[1,1626,131,25,"data"],[1,1631,131,30,"user"],[1,1637,132,15],[1,1638,132,17,"success"],[1,1647,132,26],[1,1651,134,15],[1,1652,134,17,"success"],[1,1661,134,26],[1,1663,134,33,"error"],[1,1669,134,40,"response"],[1,1671,134,49,"data"],[1,1676,134,54,"error"],[1,1683,134,63],[1,1707,136,4],[1,1708,136,6],[1,1714,136,13,"error"],[1,1717,139,6],[1,1724,137,6,"console"],[1,1732,137,14,"error"],[1,1738,137,20],[1,1756,137,39,"error"],[1,1759,139,13],[1,1760,139,15,"success"],[1,1769,139,24],[1,1771,139,31,"error"],[1,1777,138,22,"error"],[1,1779,138,28,"response"],[1,1789,138,38,"data"],[1,1795,138,44,"detail"],[1,1803,138,54,"error"],[1,1805,138,60,"response"],[1,1815,138,70,"data"],[1,1821,138,76,"error"],[1,1828,138,85],[1,1852,140,4],[1,1855,165,6,"logout"],[1,1862,143,17,"async"],[1,1872,144,4],[1,1882,145,12,"storage"],[1,1884,145,20,"removeItem"],[1,1895,145,31],[1,1915,146,12,"storage"],[1,1917,146,20,"removeItem"],[1,1928,146,31],[1,1941,147,6,"setUser"],[1,1943,147,14],[1,1948,148,4],[1,1949,148,6],[1,1955,148,13,"error"],[1,1958,149,6,"console"],[1,1966,149,14,"error"],[1,1972,149,20],[1,1988,149,37,"error"],[1,1990,150,4],[1,1993,166,6,"getToken"],[1,2002,153,19,"async"],[1,2017,154,17,"storage"],[1,2019,154,25,"getItem"],[1,2027,154,33],[1,2042,167,6,"children"],[1,2051,168,7,"children"],[1,2054,171,0],[1,2056,173,0,"_e"],[1,2059,173,0,"useAuth"],[1,2067,173,7],[1,2078,174,2],[1,2084,174,8,"context"],[1,2087,174,18],[1,2089,174,18,"useContext"],[1,2091,174,28,"useContext"],[1,2103,174,29,"AuthContext"],[1,2106,175,2],[1,2114,175,18,"undefined"],[1,2118,175,6,"context"],[1,2120,176,4],[1,2126,176,10],[1,2130,176,14,"Error"],[1,2136,176,20],[1,2183,178,2],[1,2190,178,9,"context"],[1,2191,179,0],[1,2193,1,0],[1,2197,1,0,"_react"],[1,2199,1,0,"r"],[1,2201,1,0,"d"],[1,2203,1,0],[1,2207,3,0,"axios"],[1,2210,2,0,"_interopDefault"],[1,2212,2,0,"r"],[1,2214,2,0,"d"],[1,2216,2,0],[1,2221,3,0,"_interopDefault"],[1,2223,3,0,"r"],[1,2225,3,0,"d"],[1,2227,3,0],[1,2233,3,26,"r"],[1,2235,3,26,"d"],[1,2237,3,26],[1,2245,3,26,"_reactJsxRuntime"],[1,2247,3,26,"r"],[1,2249,3,26,"d"],[1,2251,3,26],[1,2255,6,0],[1,2261,13,6,"API_URL"],[1,2263,8,4],[1,2319,33,6,"AuthContext"],[1,2322,33,20],[1,2324,33,20,"createContext"],[1,2326,33,33,"createContext"],[1,2346,33,63,"undefined"],[1,2349,36,6,"storage"],[1,2351,36,16],[1,2352,37,2,"async"],[1,2360,37,15,"getItem"],[1,2366,37,16,"key"],[1,2369,39,13,"localStorage"],[1,2382,39,26,"getItem"],[1,2390,39,34,"key"],[1,2393,43,2],[1,2406,43,8,"setItem"],[1,2407,43,16,"key"],[1,2409,43,29,"value"],[1,2412,45,6,"localStorage"],[1,2425,45,19,"setItem"],[1,2433,45,27,"key"],[1,2435,45,32,"value"],[1,2437,49,2],[1,2439,50,2],[1,2455,50,8,"removeItem"],[1,2456,50,19,"key"],[1,2459,52,6,"localStorage"],[1,2472,52,19,"removeItem"],[1,2483,52,30,"key"],[1,2485,56,2],[1,2487,179,1],[1,2490]],"functionMap":{"names":["<global>","getApiUrl","storage.getItem","storage.setItem","storage.removeItem","AuthProvider","useEffect$argument_0","checkAuth","login","register","logout","getToken","useAuth"],"mappings":"AAA;kBCK;CDK;EE0B;GFK;EGC;GHM;EIC;GJM;OKG;YCI;GDE;oBEE;GF0B;gBGE;GHuB;mBIE;GJqB;iBKE;GLQ;mBME;GNE;CLgB;OYE;CZM"},"hasCjsExports":false},"type":"js/module"}]}